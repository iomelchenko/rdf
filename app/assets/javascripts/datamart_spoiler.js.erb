<%# encoding: utf-8 %>

$(document).ready(function(){
  $('tr[class^="hide"]').hide();
  $('.spoiler').click( function(e) {
      e.stopImmediatePropagation();
	  var hiddenid = $(this).data('hidden');
	  var hdid = parseInt(hiddenid.substring(4));

	  console.log($('.' + hiddenid).filter('tr:visible').length);
	  if ($('.' + hiddenid).filter('tr:visible').length == 0) {

        $('.' + hiddenid).slideDown();
      }
      else {

        $('.' + hiddenid).slideUp();  

        $('tr:visible').filter('.n_' + hdid).not(this).hide();

      }   




   });

});	







